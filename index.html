<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<title>Waterfall.js</title>

		<link href='main.css' rel='stylesheet' type='text/css' />
	</head>
	<body>

		<canvas></canvas>

		<script id="vs" type="x-shader/vertex">
			attribute vec3 vertex;

			uniform mat4 vertex_model_to_world;
			uniform mat4 vertex_world_to_clip;

			uniform float time_offset;
			uniform float line_offset;

			varying vec2 vertex_2d;
			varying float offset;

			void main() {
				vertex_2d = vertex.xy;
				offset = line_offset + time_offset;
				gl_Position = vertex_world_to_clip * vertex_model_to_world * vec4(vertex.x, vertex.y, -offset, 1.0);
			}
		</script>

		<script id="fs-varying-color" type="x-shader/fragment">
			varying vec2 vertex_2d;
			varying float offset;

			vec3 hsv2rgb(vec3 c) {
				vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
				vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
				return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
			}

			void main() {
				vec3 hsv = vec3(vertex_2d.y * 1.2, 1, 1.0 - offset * 0.6);
				hsv = min(hsv, vec3(1, 1, 1));
				gl_FragColor = vec4(hsv2rgb(hsv), 1.0);
			}
		</script>

		<script id="fs-uniform-color" type="x-shader/fragment">
			uniform vec3 color;

			varying vec2 vertex_2d;

			void main() {
				gl_FragColor = vec4(color, 1.0);
			}
		</script>

		<script src="js/gl-matrix-min.js"></script>
		<script src="js/webgl-helpers.js"></script>
		<script src="js/camera.js"></script>
		<script src="js/audio.js"></script>
		<script src="js/waterfall.js"></script>
		<script src="js/main.js"></script>
	</body>
</html>
